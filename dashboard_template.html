<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Control de Contratos - UTI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      /* ... (puedes copiar el CSS de dashboard-principal.html) ... */
    </style>
  </head>
  <body>
    <div class="container">
      <div class="d-flex align-items-center gap-3 mb-4">
        <img src="UTI.jpg" alt="Logo UTI" width="70" />
        <h1 class="m-0">Control de Contratos - UTI</h1>
      </div>

      <div class="chart-container">
        <h4 class="text-center mb-3" style="font-weight: 600; color: #2c3e50">
          Estado de Contratos
        </h4>
        <canvas id="contratosChart"></canvas>
      </div>

      <script>
        const ctx = document.getElementById("contratosChart").getContext("2d");
        const contratosChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: [
              "Vencidos",
              "Faltan 7 días",
              "Falta 1 día",
              "Suspendidos hoy",
              "Usuarios nuevos",
              "Notificados"
            ],
            datasets: [
              {
                label: "Usuarios",
                data: [{{VENCIDOS}}, {{FALTAN_7}}, {{FALTA_1}}, {{SUSPENDIDOS}}, {{NUEVOS}}, {{NOTIFICADOS}}],
                backgroundColor: [
                  "#e74c3c", "#f39c12", "#0096c7", "#e67e22", "#28a745", "#ff9f43"
                ],
                borderRadius: 12,
                barThickness: 40
              }
            ]
          },
          options: {
            responsive: true,
            plugins: {
              legend: { display: false },
              tooltip: {
                backgroundColor: "#2c3e50",
                titleColor: "#fff",
                bodyColor: "#fff",
                cornerRadius: 6,
                padding: 10
              }
            },
            scales: {
              x: {
                ticks: { color: "#2c3e50", font: { family: "Poppins", weight: "500" } },
                grid: { color: "rgba(0, 0, 0, 0.05)" }
              },
              y: {
                beginAtZero: true,
                ticks: { color: "#2c3e50", font: { family: "Poppins", weight: "500" } },
                grid: { color: "rgba(0, 0, 0, 0.05)" }
              }
            },
            animation: { duration: 1200, easing: "easeOutBounce" }
          }
        });
      </script>
      <div class="table-container">
        <div class="table-responsive">
          <h3>Usuarios con contrato vencido</h3>
          <table class="table modern-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Teléfono</th>
                <th>Fecha Vencimiento</th>
              </tr>
            </thead>
            <tbody>
              {{TABLA_VENCIDOS}}
            </tbody>
          </table>
        </div>
        <div class="table-responsive">
          <h3>Usuarios que vencen en 7 días</h3>
          <table class="table modern-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Teléfono</th>
                <th>Fecha Vencimiento</th>
              </tr>
            </thead>
            <tbody>
              {{TABLA_7DIAS}}
            </tbody>
          </table>
        </div>
        <div class="table-responsive">
          <h3>Usuarios que vencen en 1 día</h3>
          <table class="table modern-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Teléfono</th>
                <th>Fecha Vencimiento</th>
              </tr>
            </thead>
            <tbody>
              {{TABLA_1DIA}}
            </tbody>
          </table>
        </div>
        <div class="table-responsive">
          <h3>Usuarios que se suspenderán hoy</h3>
          <table class="table modern-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Correo</th>
                <th>Fecha Vencimiento</th>
              </tr>
            </thead>
            <tbody>
              {{TABLA_SUSPENDIDOS}}
            </tbody>
          </table>
        </div>
        <div class="table-responsive">
          <h3>Usuarios Nuevos</h3>
          <table class="table modern-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Teléfono</th>
                <th>Fecha Vencimiento</th>
                <th>Mensaje Enviado</th>
              </tr>
            </thead>
            <tbody>
              {{TABLA_NUEVOS}}
            </tbody>
          </table>
        </div>
        <div class="table-responsive">
          <h3>Usuarios notificados</h3>
          <table class="table modern-table">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Correo</th>
                <th>Mensaje</th>
              </tr>
            </thead>
            <tbody>
              {{TABLA_NOTIFICADOS}}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </body>
</html>